echo "Setting up..."
echo "Welcome to package manager!"
usage()
{
    echo "Usage: $0 <install|delete|upgrade up|build me|buildconfig me|version -*|show list> <package_name>"
    echo -e "\tMade by fsvk74."
}

if [ "$2" == "" ]; then
    echo "ERROR: Enter all needed parameters"
    usage
    exit 1
fi

if [ "$1" == "install" ]; then
    echo "Getting package..."
    wget http://f0523616.xsph.ru/pkgs/$2.txz
    upgradepkg --install-new $2.txz
    rm -rf $2.txz
    echo "Package installed!"
fi

if [ "$1" == "delete" ]; then
    slackpkg remove $2
fi

if [ "$1" == "upgrade" ]; then
    git clone https://www.github.com/fsvk74/justpkg
    mv justpkg/justpkg /usr/bin/justpkg
    mv justpkg/pkgs.list /usr/share/justpkg/pkgs.list
    chmod +x /usr/bin/justpkg
    rm -rf justpkg
fi

if [ "$1" == "build" ]; then
    echo "Running make -j4"
    make -j4
fi

if [ "$1" == "buildconfig" ]; then
    echo "Running make menuconfig"
    make menuconfig
fi


if [ "$1" == "show" ]; then
    cat /usr/share/justpkg/pkgs.list
fi

if [ "$1" == "version" ]; then
    echo "$0 version is 0.3.1 for Slackware by fsvk74. License: MIT. Source code: https://www.github.com/fsvk74/justpkg"
fi
